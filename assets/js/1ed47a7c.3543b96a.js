"use strict";(self.webpackChunksailpoint_developer_portal=self.webpackChunksailpoint_developer_portal||[]).push([[85355],{99466:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>p,toc:()=>d});var a=n(87462),i=(n(67294),n(3905)),o=n(65488),r=n(85162);const l={id:"authentication",title:"Authentication",pagination_label:"Authentication",sidebar_label:"Authentication",sidebar_position:2,sidebar_class_name:"authentication",keywords:["authentication"],description:"The quickest way to authenticate and start using SailPoint APIs is to generate a personal access token.",slug:"/api/authentication",tags:["Authentication"]},s=void 0,p={unversionedId:"api/authentication",id:"api/authentication",title:"Authentication",description:"The quickest way to authenticate and start using SailPoint APIs is to generate a personal access token.",source:"@site/products/idn/api/authentication.md",sourceDirName:"api",slug:"/api/authentication",permalink:"/idn/api/authentication",draft:!1,editUrl:"https://github.com/sailpoint-oss/developer-community-site/edit/main/products/idn/api/authentication.md",tags:[{label:"Authentication",permalink:"/idn/tags/authentication"}],version:"current",lastUpdatedBy:"GitHub Action Bot",lastUpdatedAt:1666883192,formattedLastUpdatedAt:"Oct 27, 2022",sidebarPosition:2,frontMatter:{id:"authentication",title:"Authentication",pagination_label:"Authentication",sidebar_label:"Authentication",sidebar_position:2,sidebar_class_name:"authentication",keywords:["authentication"],description:"The quickest way to authenticate and start using SailPoint APIs is to generate a personal access token.",slug:"/api/authentication",tags:["Authentication"]},sidebar:"openApiSidebar",previous:{title:"Getting Started",permalink:"/idn/api/getting-started"},next:{title:"Standard Collection Parameters",permalink:"/idn/api/standard-collection-parameters"}},c={},d=[{value:"Overview",id:"overview",level:2},{value:"Find Your Tenant&#39;s OAuth Details",id:"find-your-tenants-oauth-details",level:2},{value:"Personal Access Tokens",id:"personal-access-tokens",level:2},{value:"OAuth 2.0",id:"oauth-20",level:2},{value:"JSON Web Token (JWT)",id:"json-web-token-jwt",level:2},{value:"Authentication Details",id:"authentication-details",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"OAuth 2.0 Token Request",id:"oauth-20-token-request",level:3},{value:"Authorization Code Grant Flow",id:"authorization-code-grant-flow",level:3},{value:"Authorization Flow",id:"authorization-flow",level:3},{value:"Client Credentials Grant Flow",id:"client-credentials-grant-flow",level:3},{value:"Refresh Token Grant Flow",id:"refresh-token-grant-flow",level:3},{value:"OAuth 2.0 Token Response",id:"oauth-20-token-response",level:2},{value:"Which OAuth 2.0 Grant Flow Should I use",id:"which-oauth-20-grant-flow-should-i-use",level:2},{value:"Daily Work or Quick Actions",id:"daily-work-or-quick-actions",level:3},{value:"Postman",id:"postman",level:3},{value:"Web Applications",id:"web-applications",level:3},{value:"Scripts or Programs",id:"scripts-or-programs",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2}],h={toc:d};function u(e){let{components:t,...l}=e;return(0,i.kt)("wrapper",(0,a.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("p",null,"The quickest way to authenticate and start using SailPoint APIs is to generate a\n",(0,i.kt)("a",{parentName:"p",href:"#personal-access-tokens"},"personal access token"),". If you are interested in using\nOAuth2 for authentication, then please continue to read this document."),(0,i.kt)("p",null,"In order to use the IdentityNow REST API, you must first authenticate with\nIdentityNow and get an ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token"),". This ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," will need to be\nprovided in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorization")," header of each API request. The steps of the\nflow are as follows:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Flow",src:n(20672).Z,width:"999",height:"442"})),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Access Token Request")," - The HTTP client (a script, application, Postman,\ncURL, etc.) makes a request to IdentityNow to get an ",(0,i.kt)("inlineCode",{parentName:"li"},"access_token"),". The\ndetails of this are described in the\n",(0,i.kt)("a",{parentName:"li",href:"#authentication-details"},"Authentication Details")," section."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Access Token Response")," - Assuming the request is valid, IdentityNow will\nissue an ",(0,i.kt)("inlineCode",{parentName:"li"},"access_token")," to the HTTP client in response."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"API Request")," - The HTTP client makes a request to an IdentityNow API\nendpoint. Included in that request is the header\n",(0,i.kt)("inlineCode",{parentName:"li"},"Authorization: Bearer {access_token}"),"."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"API Response")," - Assuming the request and the ",(0,i.kt)("inlineCode",{parentName:"li"},"access_token")," are valid,\nIdentityNow will return a response to the client. If unexpected errors occur,\nsee the ",(0,i.kt)("a",{parentName:"li",href:"#troubleshooting"},"Troubleshooting")," section of this document.")),(0,i.kt)("p",null,"The SailPoint authentication/authorization model is fully\n",(0,i.kt)("a",{parentName:"p",href:"https://oauth.net/2/"},"OAuth 2.0")," compliant, with issued ",(0,i.kt)("inlineCode",{parentName:"p"},"access_tokens"),"\nleveraging the ",(0,i.kt)("a",{parentName:"p",href:"https://jwt.io/"},"JSON Web Token (JWT)")," standard. This document\nprovides the necessary information for interacting with SailPoint's OAuth2\nservices."),(0,i.kt)("h2",{id:"find-your-tenants-oauth-details"},"Find Your Tenant's OAuth Details"),(0,i.kt)("p",null,"This document assumes your IDN instance is using the domain name supplied by\nSailPoint. If your instance is using a vanity URL, then you will need to open\nthe following URL in your browser to get your OAuth info. See\n",(0,i.kt)("a",{parentName:"p",href:"/idn/api/getting-started#finding-your-orgtenant-name"},"finding your org/tenant name"),"\nin the ",(0,i.kt)("a",{parentName:"p",href:"/idn/api/getting-started"},"getting started guide")," to get your ",(0,i.kt)("inlineCode",{parentName:"p"},"{tenant}"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"https://{tenant}.api.identitynow.com/oauth/info")),(0,i.kt)("p",null,"This page will present you with your ",(0,i.kt)("inlineCode",{parentName:"p"},"authorizeEndpoint")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"tokenEndpoint"),",\nwhich you will need to follow along with the examples in this document."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "tenantId": "cc31a307-8a8d-49e8-93b9-c7cbe20e2e6b",\n  "tenantName": "iga-acme-sb",\n  "authorizeEndpoint": "https://iga-sb.acme.com/oauth/authorize",\n  "tokenEndpoint": "https://iga-sb.api.identitynow.com/oauth/token",\n  "cloudDomainUrl": "https://iga-sb.acme.com",\n  "logoutUrl": "https://iga-sb.acme.com/logout",\n  "pod": "stg01-useast1"\n}\n')),(0,i.kt)("h2",{id:"personal-access-tokens"},"Personal Access Tokens"),(0,i.kt)("p",null,"A personal access token is a method of authenticating to an API as a user\nwithout needing to supply a username and password. The primary use case for\npersonal access tokens is in scripts or programs that don't have an easy way to\nimplement an OAuth 2.0 flow and that need to call API endpoints that require a\nuser context. Personal access tokens are also convenient when using Postman to\nexplore and test APIs."),(0,i.kt)("admonition",{title:"Update",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Previously, only users with the ",(0,i.kt)("inlineCode",{parentName:"p"},"Admin")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"Source Admin")," role were allowed to\ngenerate personal access tokens. Now, all users are able to generate personal\naccess tokens!")),(0,i.kt)("p",null,"To generate a personal access token from the IdentityNow UI, perform the\nfollowing steps after logging into your IdentityNow instance:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Select ",(0,i.kt)("strong",{parentName:"p"},"Preferences")," from the drop-down menu under your username, then\n",(0,i.kt)("strong",{parentName:"p"},"Personal Access Tokens")," on the left. You can also go straight to the page\nusing this URL, replacing ",(0,i.kt)("inlineCode",{parentName:"p"},"{tenant}")," with your IdentityNow tenant:\n",(0,i.kt)("inlineCode",{parentName:"p"},"https://{tenant}.identitynow.com/ui/d/user-preferences/personal-access-tokens"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Click ",(0,i.kt)("strong",{parentName:"p"},"New Token")," and enter a meaningful description to help differentiate\nthe token from others."))),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"The ",(0,i.kt)("strong",{parentName:"p"},"New Token")," button will be disabled when you\u2019ve reached the limit of 10\npersonal access tokens per user. To avoid reaching this limit, we recommend you\ndelete any tokens that are no longer needed.")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Click ",(0,i.kt)("strong",{parentName:"li"},"Create Token")," to generate and view the two components that comprise\nthe token: the ",(0,i.kt)("inlineCode",{parentName:"li"},"Secret")," and the ",(0,i.kt)("inlineCode",{parentName:"li"},"Client ID"),".")),(0,i.kt)("admonition",{title:"Important",type:"danger"},(0,i.kt)("p",{parentName:"admonition"},"After you create the token, the value of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Client ID")," will be visible in the\nPersonal Access Tokens list, but the corresponding ",(0,i.kt)("inlineCode",{parentName:"p"},"Secret")," will not be visible\nafter you close the window. You will need to store the ",(0,i.kt)("inlineCode",{parentName:"p"},"Secret")," somewhere\nsecure.")),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Copy both values somewhere that will be secure and accessible to you when you\nneed to use the the token.")),(0,i.kt)("p",null,"To generate a personal access token from the API, use the\n",(0,i.kt)("a",{parentName:"p",href:"/idn/api/beta/create-personal-access-token"},"create personal access token endpoint"),"."),(0,i.kt)("p",null,"To use a personal access token to generate an ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," that can be used to\nauthenticate requests to the API, follow the\n",(0,i.kt)("a",{parentName:"p",href:"#client-credentials-grant-flow"},"Client Credentials Grant Flow"),", using the\n",(0,i.kt)("inlineCode",{parentName:"p"},"Client ID")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Client Secret")," obtained from the personal access token."),(0,i.kt)("h2",{id:"oauth-20"},"OAuth 2.0"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://oauth.net/2/"},"OAuth 2.0")," is an industry-standard protocol for\nauthorization, and provides a variety of authorization flows for web\napplications, desktop applications, mobile phones, and devices. This\nspecification and its extensions are developed within the\n",(0,i.kt)("a",{parentName:"p",href:"https://www.ietf.org/mailman/listinfo/oauth"},"IETF OAuth Working Group"),"."),(0,i.kt)("p",null,"There are several different authorization flows that OAuth 2.0 supports, and\neach of these has a grant-type which defines the different use cases. Some of\nthe common ones which might be used with IdentityNow are as follows:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://oauth.net/2/grant-types/authorization-code/"},(0,i.kt)("strong",{parentName:"a"},"Authorization Code"))," -\nThis grant type is used by clients to exchange an authorization code for an\n",(0,i.kt)("inlineCode",{parentName:"li"},"access_token"),". This is mainly used for web applications as there is a login\ninto IdentityNow, with a subsequent redirect back to the web application /\nclient."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://oauth.net/2/grant-types/client-credentials/"},(0,i.kt)("strong",{parentName:"a"},"Client Credentials"))," -\nThis grant type is used by clients to obtain an ",(0,i.kt)("inlineCode",{parentName:"li"},"access_token")," outside the\ncontext of a user. Because this is outside of a user context, only a subset\nof IdentityNow REST APIs may be accessible with this kind of grant type."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"https://oauth.net/2/grant-types/refresh-token/"},(0,i.kt)("strong",{parentName:"a"},"Refresh Token"))," - This\ngrant type is used by clients in order to exchange a refresh token for a new\n",(0,i.kt)("inlineCode",{parentName:"li"},"access_token")," when the existing ",(0,i.kt)("inlineCode",{parentName:"li"},"access_token")," has expired. This allows\nclients to continue using the API without having to re-authenticate as\nfrequently. This grant type is commonly used together with\n",(0,i.kt)("inlineCode",{parentName:"li"},"Authorization Code")," to prevent a user from having to log in several times\nper day.")),(0,i.kt)("h2",{id:"json-web-token-jwt"},"JSON Web Token (JWT)"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://jwt.io"},"JSON Web Token (JWT)")," is an industry-standard protocol for\ncreating access tokens which assert various claims about the resource who has\nauthenticated. The tokens have a specific structure consisting of a header,\npayload, and signature."),(0,i.kt)("p",null,"A raw JWT might look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZW5hbnRfaWQiOiI1OGViMDZhNC1kY2Q3LTRlOTYtOGZhYy1jY2EyYWZjMDNlNjEiLCJpbnRlcm5hbCI6dHJ1ZSwicG9kIjoiY29vayIsIm9yZyI6ImV4YW1wbGUiLCJpZGVudGl0eV9pZCI6ImZmODA4MTgxNTVmZThjMDgwMTU1ZmU4ZDkyNWIwMzE2IiwidXNlcl9uYW1lIjoic2xwdC5zZXJ2aWNlcyIsInN0cm9uZ19hdXRoIjp0cnVlLCJhdXRob3JpdGllcyI6WyJPUkdfQURNSU4iXSwiY2xpZW50X2lkIjoibktCUE93akpIOExYU2pJbCIsInN0cm9uZ19hdXRoX3N1cHBvcnRlZCI6dHJ1ZSwidXNlcl9pZCI6IjU5NTgyNiIsInNjb3BlIjpbInJlYWQiLCJ3cml0ZSJdLCJleHAiOjE1NjU4ODgzMTksImp0aSI6ImM5OGQxMjM2LTQ1MTMtNGM4OS1hMGQwLTBjYjlmMzI3NmI1NiJ9.SAY4ZQkXGi2cY_qz57Ah9_zDq4-bnF-oDJKotXa-LCY\n")),(0,i.kt)("p",null,"If you were to decode the access token data, it might look something like this:"),(0,i.kt)(o.Z,{mdxType:"Tabs"},(0,i.kt)(r.Z,{value:"header",label:"Header",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "alg": "HS256",\n  "typ": "JWT"\n}\n'))),(0,i.kt)(r.Z,{value:"payload",label:"Payload",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "tenant_id": "58eb06a4-dcd7-4e96-8fac-cca2afc03e61",\n  "internal": true,\n  "pod": "cook",\n  "org": "example",\n  "identity_id": "ff80818155fe8c080155fe8d925b0316",\n  "user_name": "slpt.services",\n  "strong_auth": true,\n  "authorities": ["ORG_ADMIN"],\n  "client_id": "nKBPOwjJH8LXSjIl",\n  "strong_auth_supported": true,\n  "user_id": "595826",\n  "scope": ["read", "write"],\n  "exp": 1565888319,\n  "jti": "c98d1236-4513-4c89-a0d0-0cb9f3276b56"\n}\n'))),(0,i.kt)(r.Z,{value:"signature",label:"Signature",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},'HMACSHA256(\nbase64UrlEncode(header) + "." +\nbase64UrlEncode(payload),\n{secret}\n)\n')))),(0,i.kt)("p",null,"You can check the JWT access token data online at ",(0,i.kt)("a",{parentName:"p",href:"https://jwt.io"},"jwt.io"),"."),(0,i.kt)("h2",{id:"authentication-details"},"Authentication Details"),(0,i.kt)("p",null,"This section details how to call the SailPoint Platform OAuth 2.0 token\nendpoints to get an ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token"),"."),(0,i.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"Before any OAuth 2.0 token requests can be initiated, a Client ID and secret are\nnecessary. As an ",(0,i.kt)("inlineCode",{parentName:"p"},"ORG_ADMIN"),", browse to your API Management Admin Page at\n",(0,i.kt)("inlineCode",{parentName:"p"},"https://{tenant}.identitynow.com/ui/admin/#admin:global:security:apimanagementpanel"),"\nand create an API client with the appropriate grant types for your use case. If\nyou are not an admin of your org, you can ask an admin to create this for you.\nBe sure to save your ",(0,i.kt)("inlineCode",{parentName:"p"},"Client Secret")," somewhere secure, as you will not be able\nto view or change it later."),(0,i.kt)("h3",{id:"oauth-20-token-request"},"OAuth 2.0 Token Request"),(0,i.kt)("p",null,"When authenticating to IdentityNow, the OAuth 2.0 token endpoint resides on the\nIdentityNow API Gateway at:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"POST https://{tenant}.api.identitynow.com/oauth/token\n")),(0,i.kt)("p",null,"How you call this endpoint to get your token depends largely on the OAuth 2.0\nflow and grant type you wish to implement. The details for each grant type\nwithin IdentityNow are described in the following sections."),(0,i.kt)("h3",{id:"authorization-code-grant-flow"},"Authorization Code Grant Flow"),(0,i.kt)("p",null,"Further Reading:\n",(0,i.kt)("a",{parentName:"p",href:"https://oauth.net/2/grant-types/authorization-code/"},"https://oauth.net/2/grant-types/authorization-code/")),(0,i.kt)("p",null,"This grant type is used by clients to exchange an authorization code for an\n",(0,i.kt)("inlineCode",{parentName:"p"},"access_token"),". This is mainly used for web apps as there is a login into\nIdentityNow, with a subsequent redirect back to the web app / client."),(0,i.kt)("p",null,"The OAuth 2.0 client you are using must have ",(0,i.kt)("inlineCode",{parentName:"p"},"AUTHORIZATION_CODE")," as one of its\ngrant types. The redirect URLs must also match the list in the client as well:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n "enabled": true,\n "created": "2019-05-23T02:06:20.685Z",\n "name": "My Application",\n "description": "My Application",\n "id": "b61429f5-203d-494c-94c3-04f54e17bc5c",\n "secret": null,\n "grantTypes": [\n  "AUTHORIZATION_CODE"\n ],\n "redirectUris": [\n  "http://localhost:8080/myApp/code"\n ],\n ...\n}\n')),(0,i.kt)("br",null),(0,i.kt)("h3",{id:"authorization-flow"},"Authorization Flow"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Flow",src:n(54190).Z,width:"999",height:"515"})),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The user clicks the login link on a web app.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The web app sends an authorization request to IdentityNow in the form:"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-Text"},"GET https://{tenant}.identitynow.com/oauth/authorize?client_id={client-id}&client_secret={client-secret}&response_type=code&redirect_uri={redirect-url}\n")),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"IdentityNow redirects the user to a login prompt to authenticate to\nIdentityNow.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The user authenticates to IdentityNow.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Once authentication is successful, IdentityNow issues an authorization code\nback to the web app.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"The web app submits an ",(0,i.kt)("strong",{parentName:"p"},"OAuth 2.0 Token Request")," to IdentityNow in the\nform:"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"POST https://{tenant}.api.identitynow.com/oauth/token?grant_type=authorization_code&client_id={client-id}&client_secret={client-secret}&code={code}&redirect_uri={redirect-url}\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Note"),": the token endpoint URL is ",(0,i.kt)("inlineCode",{parentName:"p"},"{tenant}.api.identitynow.com"),", while the\nauthorize URL is ",(0,i.kt)("inlineCode",{parentName:"p"},"{tenant}.identitynow.com"),". Be sure to use the correct URL\nwhen setting up your webapp to use this flow.")),(0,i.kt)("ol",{start:7},(0,i.kt)("li",{parentName:"ol"},"IdentityNow validates the token request and submits a response. If\nsuccessful, the response will contain a JWT ",(0,i.kt)("inlineCode",{parentName:"li"},"access_token"),".")),(0,i.kt)("p",null,"The query parameters in the OAuth 2.0 token request for the Authorization Code\ngrant are as follows:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"grant_type")),(0,i.kt)("td",{parentName:"tr",align:null},"Set to ",(0,i.kt)("inlineCode",{parentName:"td"},"authorization_code")," for the authorization code grant type.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_id")),(0,i.kt)("td",{parentName:"tr",align:null},"This is the client ID for the API client (e.g. ",(0,i.kt)("inlineCode",{parentName:"td"},"b61429f5-203d-494c-94c3-04f54e17bc5c"),"). This can be generated at ",(0,i.kt)("inlineCode",{parentName:"td"},"https://{tenant}.identitynow.com/ui/admin/#admin:global:security:apimanagementpanel"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_secret ")),(0,i.kt)("td",{parentName:"tr",align:null},"This is the client secret for the API client (e.g. ",(0,i.kt)("inlineCode",{parentName:"td"},"c924417c85b19eda40e171935503d8e9747ca60ddb9b48ba4c6bb5a7145fb6c5"),"). This can be generated at ",(0,i.kt)("inlineCode",{parentName:"td"},"https://{tenant}.identitynow.com/ui/admin/#admin:global:security:apimanagementpanel"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"code")),(0,i.kt)("td",{parentName:"tr",align:null},"This is a code returned by ",(0,i.kt)("inlineCode",{parentName:"td"},"/oauth/authorize"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"redirect_uri")),(0,i.kt)("td",{parentName:"tr",align:null},"This is a URL of the application to redirect to once the token has been granted.")))),(0,i.kt)("p",null,"Here is an example OAuth 2.0 token request for the Authorization Code grant\ntype."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X POST \\\n 'https://example.api.identitynow.com/oauth/token?grant_type=authorization_code&client_id=b61429f5-203d-494c-94c3-04f54e17bc5c&client_secret=c924417c85b19eda40e171935503d8e9747ca60ddb9b48ba4c6bb5a7145fb6c5&code=6688LQJB0y652z6ZjFmkCKuBUjv2sTIqKS2JthWrZ7qlPgI9TClJ6FnpweEhO6w7&redirect_uri=https://myappdomain.com/oauth/redirect' \\\n -H 'cache-control: no-cache'\n")),(0,i.kt)("h3",{id:"client-credentials-grant-flow"},"Client Credentials Grant Flow"),(0,i.kt)("p",null,"Further Reading:\n",(0,i.kt)("a",{parentName:"p",href:"https://oauth.net/2/grant-types/client-credentials/"},"https://oauth.net/2/grant-types/client-credentials/")),(0,i.kt)("p",null,"This grant type is used by clients to obtain an access token outside the context\nof a user. This is probably the simplest authentication flow, but comes with a\nmajor drawback; API endpoints that require\n",(0,i.kt)("a",{parentName:"p",href:"https://documentation.sailpoint.com/saas/help/common/users/user_level_matrix.html"},"user level permissions"),"\nwill not work. ",(0,i.kt)("a",{parentName:"p",href:"#personal-access-tokens"},"Personal Access Tokens")," are a form of\nClient Credentials that have a user context, so they do not share this drawback.\nHowever, the APIs that can be invoked with a personal access token depend on the\npermissions of the user that generated it."),(0,i.kt)("p",null,"An OAuth 2.0 client using the Client Credentials flow must have\n",(0,i.kt)("inlineCode",{parentName:"p"},"CLIENT_CREDENTIALS")," as one of its grantTypes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n "enabled": true,\n "created": "2019-05-23T02:06:20.685Z",\n "name": "My Application",\n "description": "My Application",\n "id": "b61429f5-203d-494c-94c3-04f54e17bc5c",\n "secret": null,\n "grantTypes": [\n  "CLIENT_CREDENTIALS"\n ],\n ...\n}\n')),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"#personal-access-tokens"},"Personal Access Tokens")," are implicly granted a\n",(0,i.kt)("inlineCode",{parentName:"p"},"CLIENT_CREDENTIALS")," grant type."),(0,i.kt)("p",null,"The overall authorization flow looks like this:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"The client submits an ",(0,i.kt)("strong",{parentName:"li"},"OAuth 2.0 Token Request")," to IdentityNow in the form:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"POST https://{tenant}.api.identitynow.com/oauth/token?grant_type=client_credentials&client_id={client-id}&client_secret={client-secret}\n")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"IdentityNow validates the token request and submits a response. If\nsuccessful, the response will contain a JWT access token.")),(0,i.kt)("p",null,"The query parameters in the OAuth 2.0 Token Request for the Client Credentials\ngrant are as follows:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"grant_type")),(0,i.kt)("td",{parentName:"tr",align:null},"Set to ",(0,i.kt)("inlineCode",{parentName:"td"},"CLIENT_CREDENTIALS")," for the authorization code grant type.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_id")),(0,i.kt)("td",{parentName:"tr",align:null},"This is the client ID describing for the API client (e.g. ",(0,i.kt)("inlineCode",{parentName:"td"},"b61429f5-203d-494c-94c3-04f54e17bc5c"),"). This can be generated at ",(0,i.kt)("inlineCode",{parentName:"td"},"https://{tenant}.identitynow.com/ui/admin/#admin:global:security:apimanagementpanel")," or by ",(0,i.kt)("a",{parentName:"td",href:"#personal-access-tokens"},"creating a personal access token"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_secret")),(0,i.kt)("td",{parentName:"tr",align:null},"This is the client secret describing for the API client (e.g. ",(0,i.kt)("inlineCode",{parentName:"td"},"c924417c85b19eda40e171935503d8e9747ca60ddb9b48ba4c6bb5a7145fb6c5"),"). This can be generated at ",(0,i.kt)("inlineCode",{parentName:"td"},"https://{tenant}.identitynow.com/ui/admin/#admin:global:security:apimanagementpanel")," or by ",(0,i.kt)("a",{parentName:"td",href:"#personal-access-tokens"},"creating a personal access token"),".")))),(0,i.kt)("p",null,"Here is an example request to generate an ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," using Client\nCredentials."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X POST \\\n 'https://{tenant}.api.identitynow.com/oauth/token?grant_type=client_credentials&client_id={client_id}&client_secret={client_secret}' \\\n -H 'cache-control: no-cache'\n")),(0,i.kt)("h3",{id:"refresh-token-grant-flow"},"Refresh Token Grant Flow"),(0,i.kt)("p",null,"Further Reading:\n",(0,i.kt)("a",{parentName:"p",href:"https://oauth.net/2/grant-types/refresh-token/"},"https://oauth.net/2/grant-types/refresh-token/")),(0,i.kt)("p",null,"This grant type is used by clients in order to exchange a refresh token for a\nnew ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," once the existing ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," has expired. This allows\nclients to continue to have a valid ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," without the need for the user\nto login as frequently."),(0,i.kt)("p",null,"The OAuth 2.0 client you are using must have ",(0,i.kt)("inlineCode",{parentName:"p"},"REFRESH_TOKEN")," as one of its grant\ntypes, and is typically used in conjunction with another grant type, like\n",(0,i.kt)("inlineCode",{parentName:"p"},"CLIENT_CREDENTIALS")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"AUTHORIZATION_CODE"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n "enabled": true,\n "created": "2019-05-23T02:06:20.685Z",\n "name": "My Application",\n "description": "My Application",\n "id": "b61429f5-203d-494c-94c3-04f54e17bc5c",\n "secret": null,\n "grantTypes": [\n  "REFRESH_TOKEN",\n  "AUTHORIZATION_CODE"\n ],\n ...\n}\n')),(0,i.kt)("p",null,"The overall authorization flow looks like this:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"The client application receives an ",(0,i.kt)("inlineCode",{parentName:"li"},"access_token")," and a ",(0,i.kt)("inlineCode",{parentName:"li"},"refresh_token")," via\none of the other OAuth grant flows, like ",(0,i.kt)("inlineCode",{parentName:"li"},"AUTHORIZATION_CODE"),"."),(0,i.kt)("li",{parentName:"ol"},"The client application notices that the ",(0,i.kt)("inlineCode",{parentName:"li"},"access_token")," is about to expire,\nbased on the ",(0,i.kt)("inlineCode",{parentName:"li"},"expires_in")," attribute contained within the JWT token."),(0,i.kt)("li",{parentName:"ol"},"The client submits an ",(0,i.kt)("strong",{parentName:"li"},"OAuth 2.0 Token Request")," to IdentityNow in the form:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"POST https://{tenant}.api.identitynow.com/oauth/token?grant_type=refresh_token&client_id={client_id}&client_secret={client_secret}&refresh_token={refresh_token}\n")),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"IdentityNow validates the token request and submits a response. If\nsuccessful, the response will contain a new ",(0,i.kt)("inlineCode",{parentName:"li"},"access_token")," and\n",(0,i.kt)("inlineCode",{parentName:"li"},"refresh_token"),".")),(0,i.kt)("p",null,"The query parameters in the OAuth 2.0 Token Request for the Refresh Token grant\nare as follows:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Key"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"grant_type")),(0,i.kt)("td",{parentName:"tr",align:null},"Set to ",(0,i.kt)("inlineCode",{parentName:"td"},"refresh_token")," for the authorization code grant type.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_id")),(0,i.kt)("td",{parentName:"tr",align:null},"This is the client ID for the API client (e.g. ",(0,i.kt)("inlineCode",{parentName:"td"},"b61429f5-203d-494c-94c3-04f54e17bc5c"),"). This can be generated at ",(0,i.kt)("inlineCode",{parentName:"td"},"https://{tenant}.identitynow.com/ui/admin/#admin:global:security:apimanagementpanel"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"client_secret")),(0,i.kt)("td",{parentName:"tr",align:null},"This is the client secret for the API client (e.g. ",(0,i.kt)("inlineCode",{parentName:"td"},"c924417c85b19eda40e171935503d8e9747ca60ddb9b48ba4c6bb5a7145fb6c5"),"). This can be generated at ",(0,i.kt)("inlineCode",{parentName:"td"},"https://{tenant}.identitynow.com/ui/admin/#admin:global:security:apimanagementpanel"),".")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"refresh_token")),(0,i.kt)("td",{parentName:"tr",align:null},"This is the ",(0,i.kt)("inlineCode",{parentName:"td"},"refresh_token")," that was provided along with the now expired ",(0,i.kt)("inlineCode",{parentName:"td"},"access_token"),".")))),(0,i.kt)("p",null,"Here is an example call OAuth 2.0 Token Request for the Refresh Token grant."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X POST \\\n 'https://example.api.identitynow.com/oauth/token?grant_type=refresh_token&client_id=b61429f5-203d-494c-94c3-04f54e17bc5c&client_secret=c924417c85b19eda40e171935503d8e9747ca60ddb9b48ba4c6bb5a7145fb6c5&refresh_token=ey...4M' \\\n -H 'cache-control: no-cache'\n")),(0,i.kt)("h2",{id:"oauth-20-token-response"},"OAuth 2.0 Token Response"),(0,i.kt)("p",null,"A successful request to ",(0,i.kt)("inlineCode",{parentName:"p"},"https://{tenant}.api.identitynow.com/oauth/token")," will\ncontain a response body similar to this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZW5hbnRfaWQiOiI1OGViMDZhNC1kY2Q3LTRlOTYtOGZhYy1jY2EyYWZjMDNlNjEiLCJpbnRlcm5hbCI6ZmFsc2UsInBvZCI6ImNvb2siLCJvcmciOiJuZWlsLXRlc3QiLCJpZGVudGl0eV9pZCI6ImZmODA4MTgxNTVmZThjMDgwMTU1ZmU4ZDkyNWIwMzE2IiwidXNlcl9uYW1lIjoic2xwdC5zZXJ2aWNlcyIsInN0cm9uZ19hdXRoIjp0cnVlLCJhdXRob3JpdGllcyI6WyJPUkdfQURNSU4iXSwiZW5hYmxlZCI6dHJ1ZSwiY2xpZW50X2lkIjoiZmNjMGRkYmItMTA1Yy00Y2Q3LWI5NWUtMDI3NmNiZTQ1YjkwIiwiYWNjZXNzVHlwZSI6Ik9GRkxJTkUiLCJzdHJvbmdfYXV0aF9zdXBwb3J0ZWQiOmZhbHNlLCJ1c2VyX2lkIjoiNTk1ODI2Iiwic2NvcGUiOlsicmVhZCIsIndyaXRlIl0sImV4cCI6MTU2NTg5MTA2MywianRpIjoiOTQ5OWIyOTktOTVmYS00N2ZiLTgxNWMtODVkNWY2YjQzZTg2In0.zJYfjIladuGHoLXr92EOJ3A9qGNkiG5UJ9eqrtSYXAQ",\n  "token_type": "bearer",\n  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0ZW5hbnRfaWQiOiI1OGViMDZhNC1kY2Q3LTRlOTYtOGZhYy1jY2EyYWZjMDNlNjEiLCJpbnRlcm5hbCI6ZmFsc2UsInBvZCI6ImNvb2siLCJvcmciOiJuZWlsLXRlc3QiLCJpZGVudGl0eV9pZCI6ImZmODA4MTgxNTVmZThjMDgwMTU1ZmU4ZDkyNWIwMzE2IiwidXNlcl9uYW1lIjoic2xwdC5zZXJ2aWNlcyIsInN0cm9uZ19hdXRoIjp0cnVlLCJhdXRob3JpdGllcyI6WyJPUkdfQURNSU4iXSwiZW5hYmxlZCI6dHJ1ZSwiY2xpZW50X2lkIjoiZmNjMGRkYmItMTA1Yy00Y2Q3LWI5NWUtMDI3NmNiZTQ1YjkwIiwiWYNjZXNzVHlwZSI6Ik9GRkxJTkUiLCJzdHJvbmdfYXV0aF9zdXBwb3J0ZWQiOmZhbHNlLCJ1c2VyX2lkIjoiNTk1ODI2Iiwic2NvcGUiOlsicmVhZCIsIndyaXRlIl0sImF0aSI6Ijk0OTliMjk5LTk1ZmEtNDdmYi04MTVjLTg1ZDVmNmI0M2U4NiIsImV4cCI6MTU2NTk3NjcxMywianRpIjoiODliODk1ZDMtNTdlNC00ZDAwLWI5ZjctOTFlYWVjNDcxMGQ3In0.pfDcB0sGChdHk-oDNmiIxsKFLxq9CcPQV5-eXWgIcp4",\n  "expires_in": 749,\n  "scope": "read write",\n  "accessType": "OFFLINE",\n  "tenant_id": "58eb06a4-dcd7-4e96-8fac-cca2afc03e61",\n  "internal": false,\n  "pod": "cook",\n  "strong_auth_supported": false,\n  "org": "example",\n  "user_id": "595826",\n  "identity_id": "ff80818155fe8c080155fe8d925b0316",\n  "strong_auth": true,\n  "enabled": true,\n  "jti": "9499b299-95fa-47fb-815c-85d5f6b43e86"\n}\n')),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," contains the JSON Web Token which is subsequently used in any\nfurther REST API calls through the IdentityNow API gateway. To use the\n",(0,i.kt)("inlineCode",{parentName:"p"},"access_token"),", simply include it in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorization")," header as a ",(0,i.kt)("inlineCode",{parentName:"p"},"Bearer"),"\ntoken. For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"curl -X GET \\\n 'https://{tenant}.api.identitynow.com/v3/account-activities' \\\n -H 'Authorization: Bearer {access_token}' \\\n -H 'cache-control: no-cache'\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"expires_in")," describes the lifetime, in seconds, of the ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token"),". For\nexample, the value 749 means that the ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," will expire in 12.5 minutes\nfrom the time the response was generated. The exact expiration date is also\ncontained within the ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token"),". You can view this expiration time by\ndecoding the JWT ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," using a tool like ",(0,i.kt)("a",{parentName:"p",href:"https://jwt.io/"},"jwt.io"),"."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"refresh_token")," contains a JSON Web Token for use in a\n",(0,i.kt)("a",{parentName:"p",href:"#refresh-token-grant-flow"},"Refresh Token")," grant flow. The ",(0,i.kt)("inlineCode",{parentName:"p"},"refresh_token")," will\nonly be present if the API client has the ",(0,i.kt)("inlineCode",{parentName:"p"},"REFRESH_CODE")," grant flow."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"user_id")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"identity_id")," define the identity context of the person that\nauthenticated. This is not set for the Client Credentials grant type since it\ndoesn't have a user context."),(0,i.kt)("h2",{id:"which-oauth-20-grant-flow-should-i-use"},"Which OAuth 2.0 Grant Flow Should I use"),(0,i.kt)("p",null,"Deciding which OAuth 2.0 grant flow you should use largely depends on your use\ncase."),(0,i.kt)("h3",{id:"daily-work-or-quick-actions"},"Daily Work or Quick Actions"),(0,i.kt)("p",null,"For daily work or short, quick administrative actions, you may not really need\nto worry about grant types, as an access token can easily be obtained in the\nuser interface. In order to see this:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Login to IdentityNow."),(0,i.kt)("li",{parentName:"ol"},"Go to ",(0,i.kt)("inlineCode",{parentName:"li"},"https://{tenant}.identitynow.com/ui/session"),"."),(0,i.kt)("li",{parentName:"ol"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"accessToken")," is visible in the user interface."),(0,i.kt)("li",{parentName:"ol"},"Use this access token in the ",(0,i.kt)("inlineCode",{parentName:"li"},"Authorization")," header when making API calls. If\nthe access token expires, log back into Identity Now and retrieve the new\naccess token.")),(0,i.kt)("p",null,"While this is very simple to use, this is only valid for a short period of time\n(a few minutes)."),(0,i.kt)("h3",{id:"postman"},"Postman"),(0,i.kt)("p",null,"If you are using the popular HTTP client, ",(0,i.kt)("a",{parentName:"p",href:"https://www.getpostman.com"},"Postman"),",\nyou have a couple of options on how you might setup your authorization. You can\njust leverage the accessToken as mentioned above, or you can also configure\nPostman to use OAuth 2.0 directly."),(0,i.kt)("h3",{id:"web-applications"},"Web Applications"),(0,i.kt)("p",null,"If you are making a web application, the best grant flow to use is the\n",(0,i.kt)("a",{parentName:"p",href:"#authorization-code-grant-flow"},"Authorization Code")," grant flow. This will allow\nusers to be directed to IdentityNow to login, and then redirected back to the\nweb application via a URL redirect. This also works well with SSO, strong\nauthentication, or pass-through authentication mechanisms."),(0,i.kt)("p",null,"SailPoint does not recommend using a password grant flow for web applications as\nit would involve entering IdentityNow credentials in the web application. This\nflow also doesn't allow you to work with SSO, strong authentication, or\npass-through authentication."),(0,i.kt)("h3",{id:"scripts-or-programs"},"Scripts or Programs"),(0,i.kt)("p",null,"If you are writing scripts or programs that leverage the IdentityNow APIs, which\nOAuth 2.0 grant from you should use typically depends on what you are doing, and\nwhich user context you need to operate under."),(0,i.kt)("p",null,"Because scripts, code, or programs do not have an interactive web-interface it\nis difficult, but not impossible, to implement a working\n",(0,i.kt)("a",{parentName:"p",href:"#authorization-code-grant-flow"},"Authorization Code")," flow. Most scripts or\nprograms typically run as a\n",(0,i.kt)("a",{parentName:"p",href:"#client-credentials-grant-flow"},"Client Credentials"),". If your APIs can work\nunder an API context without a user, then\n",(0,i.kt)("a",{parentName:"p",href:"#client-credentials-grant-flow"},"Client Credentials")," is ideal. However, if your\nAPIs need a user or admin context, then the\n",(0,i.kt)("a",{parentName:"p",href:"#personal-access-tokens"},"Personal Access Token")," approach will be more suitable."),(0,i.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("p",null,"Having issues? Follow these steps."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Verify the API End Point Calls"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify the structure of the API call:")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify that the API calls are going through the API gateway:\n",(0,i.kt)("inlineCode",{parentName:"p"},"https://{tenant}.api.identitynow.com"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify you are calling their version correctly:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Private APIs: ",(0,i.kt)("inlineCode",{parentName:"li"},"https://{tenant}.api.identitynow.com/cc/api/{endpoint}")),(0,i.kt)("li",{parentName:"ul"},"V2 APIs: ",(0,i.kt)("inlineCode",{parentName:"li"},"https://{tenant}.api.identitynow.com/v2/{endpoint}")),(0,i.kt)("li",{parentName:"ul"},"V3 APIs: ",(0,i.kt)("inlineCode",{parentName:"li"},"https://{tenant}.api.identitynow.com/v3/{endpoint}")),(0,i.kt)("li",{parentName:"ul"},"Beta APIs: ",(0,i.kt)("inlineCode",{parentName:"li"},"https://{tenant}.api.identitynow.com/beta/{endpoint}")))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify that the API calls have the correct headers (e.g., ",(0,i.kt)("inlineCode",{parentName:"p"},"content-type"),"),\nquery parameters, and body data.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If the HTTP response is ",(0,i.kt)("strong",{parentName:"p"},"401 Unauthorized")," , this is an indication that\neither there is no ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorization")," header or the ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," is invalid.\nVerify that the API calls are supplying the ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," in the\n",(0,i.kt)("inlineCode",{parentName:"p"},"Authorization")," header correctly (ex. ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorization: Bearer {access_token}"),")\nand that the ",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," has not expired.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If the HTTP response is ",(0,i.kt)("strong",{parentName:"p"},"403 Forbidden"),", this is an indication that the\n",(0,i.kt)("inlineCode",{parentName:"p"},"access_token")," is valid, but the user you are running as doesn't have access\nto this endpoint. Check the access rights which are associated with the user."))),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"This can also be due to calling an API which expects a user, but your\nauthorization grant type might not have a user context. Calling most\nadministrative APIs with a CLIENT_CREDENTIAL grant will often produce this\nresult.")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Verify the OAuth 2.0 Client"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify that the OAuth 2.0 Client is not a Legacy OAuth client. Legacy OAuth\nclients will not work. This is very apparent by looking at the Client ID, as\nOAuth 2.0 Client IDs have dashes. Here is an example: Legacy Client ID:\n",(0,i.kt)("inlineCode",{parentName:"p"},"G6xLlBBOKIcOAQuK")," OAuth 2.0 Client ID:\n",(0,i.kt)("inlineCode",{parentName:"p"},"b61429f5-203d-494c-94c3-04f54e17bc5c"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify the OAuth 2.0 Client ID exists. This can be verified by calling:"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"}," GET /beta/oauth-clients/{client-id}\n")),(0,i.kt)("p",null,"or"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"GET /beta/oauth-clients/\n")),(0,i.kt)("p",null,"You can also view all of the active clients in the UI by going to\n",(0,i.kt)("inlineCode",{parentName:"p"},"https://{tenant}.identitynow.com/ui/admin/#admin:global:security:apimanagementpanel"),"."),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Verify that the OAuth 2.0 Client grant types match the OAuth 2.0 grant type\nflow you are trying to use. For instance, this client will work with\n",(0,i.kt)("a",{parentName:"li",href:"#authorization-code-grant-flow"},"Authorization Code")," and\n",(0,i.kt)("a",{parentName:"li",href:"#client-Credentials-grant-flow"},"Client Credentials")," flows, but not\n",(0,i.kt)("a",{parentName:"li",href:"#refresh-token-grant-flow"},"Refresh Token")," flows:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n "enabled": true,\n "created": "2019-05-23T02:06:20.685Z",\n "name": "My Application",\n "description": "My Application",\n "id": "b61429f5-203d-494c-94c3-04f54e17bc5c",\n "secret": null,\n "grantTypes": [\n  "AUTHORIZATION_CODE",\n  "CLIENT_CREDENTIALS"\n ],\n ...\n}\n')),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"If using an A",(0,i.kt)("a",{parentName:"p",href:"#authorization-code-grant-flow"},"Authorization Code")," flow,\nverify the redirect URL(s) for your application match the ",(0,i.kt)("inlineCode",{parentName:"p"},"redirectUris"),"\nvalue in the client. You can check this using the\n",(0,i.kt)("a",{parentName:"p",href:"/idn/api/beta/list-oauth-clients"},"oauth-clients endpoint"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Verify the OAuth 2.0 Calls"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Verify that the OAuth call flow is going to the right URLs, with the correct\nquery parameters and data values. A common source of errors is using the\nwrong host for authorization and token API calls. The token endpoint URL is\n",(0,i.kt)("inlineCode",{parentName:"p"},"{tenant}.api.identitynow.com"),", while the authorize URL is\n",(0,i.kt)("inlineCode",{parentName:"p"},"{tenant}.identitynow.com"),"."))))}u.isMDXComponent=!0},65488:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(87462),i=n(67294),o=n(86010),r=n(72389),l=n(67392),s=n(7094),p=n(12466);const c="tabList__CuJ",d="tabItem_LNqP";function h(e){var t,n;const{lazy:r,block:h,defaultValue:u,values:k,groupId:m,className:N}=e,g=i.Children.map(e.children,(e=>{if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),y=null!=k?k:g.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),w=(0,l.l)(y,((e,t)=>e.value===t.value));if(w.length>0)throw new Error('Docusaurus error: Duplicate values "'+w.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.');const f=null===u?u:null!=(t=null!=u?u:null==(n=g.find((e=>e.props.default)))?void 0:n.props.value)?t:g[0].props.value;if(null!==f&&!y.some((e=>e.value===f)))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+f+'" but none of its children has the corresponding value. Available values are: '+y.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");const{tabGroupChoices:b,setTabGroupChoices:I}=(0,s.U)(),[T,C]=(0,i.useState)(f),A=[],{blockElementScrollPositionUntilNextRender:v}=(0,p.o5)();if(null!=m){const e=b[m];null!=e&&e!==T&&y.some((t=>t.value===e))&&C(e)}const _=e=>{const t=e.currentTarget,n=A.indexOf(t),a=y[n].value;a!==T&&(v(t),C(a),null!=m&&I(m,String(a)))},O=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{var a;const t=A.indexOf(e.currentTarget)+1;n=null!=(a=A[t])?a:A[0];break}case"ArrowLeft":{var i;const t=A.indexOf(e.currentTarget)-1;n=null!=(i=A[t])?i:A[A.length-1];break}}null==(t=n)||t.focus()};return i.createElement("div",{className:(0,o.Z)("tabs-container",c)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":h},N)},y.map((e=>{let{value:t,label:n,attributes:r}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:T===t?0:-1,"aria-selected":T===t,key:t,ref:e=>A.push(e),onKeyDown:O,onFocus:_,onClick:_},r,{className:(0,o.Z)("tabs__item",d,null==r?void 0:r.className,{"tabs__item--active":T===t})}),null!=n?n:t)}))),r?(0,i.cloneElement)(g.filter((e=>e.props.value===T))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==T})))))}function u(e){const t=(0,r.Z)();return i.createElement(h,(0,a.Z)({key:String(t)},e))}},20672:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/http-client-identity-now-fb3fa2226560b0baf9d193e85b0c2857.png"},54190:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/user-web-app-identity-now-935c1695164960044ac13c9545b9b58c.png"}}]);